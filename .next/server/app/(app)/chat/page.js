(()=>{var e={};e.id=378,e.ids=[378],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},7252:e=>{"use strict";e.exports=require("express")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11516:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},14283:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},19895:(e,t,r)=>{Promise.resolve().then(r.bind(r,70718))},21068:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]])},21820:e=>{"use strict";e.exports=require("os")},24026:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},24750:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var s=r(60687),i=r(43210),a=r(14283),o=r(11516),n=r(82614);let l=(0,n.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),d=(0,n.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var c=r(29523),u=r(89667),p=r(44493),h=r(32584),m=r(49315),x=r(6475);let f=(0,x.createServerReference)("404587e18641e5b594fdc5e6fe007186c2ea04ba7d",x.callServer,void 0,x.findSourceMapURL,"followUpPlantQueries");var g=r(91821),y=r(83375),v=r(38495),b=r(97905);let w=["Suggest a good organic fertilizer for tomatoes.","How do I test my soil's pH level?","Create a watering schedule for indoor ferns."],j={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},q={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function k(){let[e,t]=(0,i.useState)([]),[r,n]=(0,i.useState)(""),[x,k]=(0,i.useState)(!1),{user:N}=(0,m.A)(),[A,P]=(0,i.useState)(null),{language:_}=(0,y.o)(),z=async e=>{let s=e||r;if(!s.trim())return;let i={text:s,isUser:!0};t(e=>[...e,i]),n(""),k(!0),P(null);try{(0,v.$)("chat_message",{length:s.length,language:_});let e={text:(await f({diagnosisSummary:"The user is asking a general agricultural question.",followUpQuery:s,language:_})).answer,isUser:!1};t(t=>[...t,e])}catch(e){console.error(e),P("Sorry, the AI chatbot is currently unavailable. Please try again later."),(0,v.$)("chat_message_failed",{language:_})}finally{k(!1)}};return(0,s.jsxs)(b.P.div,{className:"container mx-auto max-w-3xl h-full flex flex-col",variants:j,initial:"hidden",animate:"visible",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto pr-4 space-y-6",children:[0===e.length&&(0,s.jsxs)(b.P.div,{className:"text-center py-8 md:py-16",variants:q,children:[(0,s.jsx)(a.A,{className:"w-16 h-16 text-muted-foreground mb-4 mx-auto"}),(0,s.jsx)("h1",{className:"font-headline text-3xl font-bold tracking-tight",children:"AgroBot"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Your AI agricultural assistant. How can I help?"}),(0,s.jsx)(b.P.div,{className:"mt-8 grid sm:grid-cols-1 md:grid-cols-3 gap-2",variants:j,children:w.map(e=>(0,s.jsx)(b.P.div,{variants:q,children:(0,s.jsx)(c.$,{variant:"outline",onClick:()=>z(e),className:"w-full h-full text-wrap",children:e})},e))})]}),e.map((e,t)=>(0,s.jsxs)(b.P.div,{className:`flex items-start gap-3 ${e.isUser?"justify-end":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[!e.isUser&&(0,s.jsx)(h.eu,{className:"w-8 h-8 border",children:(0,s.jsx)(h.q5,{children:(0,s.jsx)(a.A,{className:"w-5 h-5"})})}),(0,s.jsx)(p.Zp,{className:`w-full ${e.isUser?"bg-primary text-primary-foreground":""} md:max-w-md lg:max-w-lg`,children:(0,s.jsx)(p.Wu,{className:"p-3",children:(0,s.jsx)("p",{children:e.text})})}),e.isUser&&(0,s.jsxs)(h.eu,{className:"w-8 h-8 border",children:[N?.photoURL&&(0,s.jsx)(h.BK,{src:N.photoURL}),(0,s.jsx)(h.q5,{children:N?.displayName?.charAt(0)||"U"})]})]},t)),x&&(0,s.jsxs)(b.P.div,{className:"flex items-start gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,s.jsx)(h.eu,{className:"w-8 h-8 border",children:(0,s.jsx)(h.q5,{children:(0,s.jsx)(a.A,{className:"w-5 h-5"})})}),(0,s.jsx)(p.Zp,{className:"max-w-md",children:(0,s.jsxs)(p.Wu,{className:"p-3 flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"w-5 h-5 animate-spin"}),(0,s.jsx)("p",{children:"AgroBot is thinking..."})]})})]}),A&&(0,s.jsxs)(g.Fc,{variant:"destructive",children:[(0,s.jsx)(l,{className:"h-4 w-4"}),(0,s.jsx)(g.TN,{children:A})]})]}),(0,s.jsx)(b.P.div,{className:"mt-4 sticky bottom-20 sm:bottom-0",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e.length>0?0:.5},children:(0,s.jsxs)("form",{className:"flex gap-2",onSubmit:e=>{e.preventDefault(),z()},children:[(0,s.jsx)(u.p,{value:r,onChange:e=>n(e.target.value),placeholder:"Ask about fertilizers, pests, and more...",className:"flex-1",disabled:x}),(0,s.jsx)(c.$,{type:"submit",disabled:x||!r.trim(),children:(0,s.jsx)(d,{className:"w-5 h-5"})})]})})]})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},38495:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});var s=r(66639),i=r(10178);let a=async(e,t)=>{try{let r=await s.zS;r&&(0,i.$s)(r,e,t)}catch(e){console.error("Error logging analytics event:",e)}}},44610:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},44708:e=>{"use strict";e.exports=require("node:https")},45670:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\agrovision-ai\\\\src\\\\app\\\\(app)\\\\chat\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\agrovision-ai\\src\\app\\(app)\\chat\\page.tsx","default")},47002:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=47002,e.exports=t},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},62475:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),i=r(48088),a=r(88170),o=r.n(a),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d={children:["",{children:["(app)",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,45670)),"D:\\agrovision-ai\\src\\app\\(app)\\chat\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70718)),"D:\\agrovision-ai\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"D:\\agrovision-ai\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\agrovision-ai\\src\\app\\(app)\\chat\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(app)/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67760:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var s=r(60687),i=r(85814),a=r.n(i),o=r(16189),n=r(4780),l=r(24026),d=r(21068),c=r(44610),u=r(14283),p=r(58595),h=r(97905);let m=[{href:"/dashboard",label:"Home",icon:l.A},{href:"/diagnose",label:"Scan",icon:d.A},{href:"/history",label:"History",icon:c.A},{href:"/chat",label:"Chat",icon:u.A},{href:"/profile",label:"Profile",icon:p.A}];function x(){let e=(0,o.usePathname)();return(0,s.jsx)(h.P.nav,{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden bg-background/80 backdrop-blur-sm border-t",initial:{y:100},animate:{y:0},transition:{type:"spring",stiffness:300,damping:30},children:(0,s.jsx)("div",{className:"grid h-16 grid-cols-5",children:m.map(t=>{let r="/dashboard"===t.href?e===t.href:e.startsWith(t.href);return(0,s.jsxs)(a(),{href:t.href,className:"flex flex-col items-center justify-center gap-1 text-xs transition-colors text-muted-foreground hover:text-primary",children:[(0,s.jsx)(h.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)(t.icon,{className:(0,n.cn)("w-6 h-6",r?"text-primary":"")})}),(0,s.jsx)("span",{className:(0,n.cn)(r?"text-primary font-semibold":""),children:t.label})]},t.href)})})})}var f=r(94556),g=r(49315);r(43210);var y=r(11516);let v=["/login","/signup"];function b({children:e}){let{user:t,loading:r}=(0,g.A)();(0,o.useRouter)();let i=(0,o.usePathname)();return!r&&(t||v.includes(i))?(0,s.jsx)(s.Fragment,{children:e}):(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,s.jsx)(y.A,{className:"h-8 w-8 animate-spin"})})}function w({children:e}){return(0,s.jsx)(b,{children:(0,s.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,s.jsx)(f.A,{}),(0,s.jsx)(h.P.main,{className:"flex-1 p-4 pt-20 pb-24 md:p-6 md:pt-24 lg:p-8 lg:pt-28",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:(0,s.jsx)("div",{className:"mx-auto max-w-7xl w-full",children:e})}),(0,s.jsx)(h.P.footer,{className:"border-t py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:(0,s.jsxs)("div",{className:"container mx-auto px-4 text-center text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex justify-center gap-4 mb-4",children:[(0,s.jsx)(a(),{href:"/terms-of-use",className:"hover:text-primary text-sm",children:"Terms of Use"}),(0,s.jsx)(a(),{href:"/privacy-policy",className:"hover:text-primary text-sm",children:"Privacy Policy"})]}),(0,s.jsxs)("p",{className:"text-sm",children:["\xa9 ",new Date().getFullYear()," AgroVision AI. All rights reserved."]})]})}),(0,s.jsx)(x,{})]})})}},70718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\agrovision-ai\\\\src\\\\app\\\\(app)\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\agrovision-ai\\src\\app\\(app)\\layout.tsx","default")},73024:e=>{"use strict";e.exports=require("node:fs")},73039:(e,t,r)=>{Promise.resolve().then(r.bind(r,67760))},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81004:(e,t,r)=>{Promise.resolve().then(r.bind(r,24750))},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},89667:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var s=r(60687),i=r(43210),a=r(4780);let o=i.forwardRef(({className:e,type:t,...r},i)=>(0,s.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));o.displayName="Input"},91276:(e,t,r)=>{Promise.resolve().then(r.bind(r,45670))},91645:e=>{"use strict";e.exports=require("net")},91821:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>l,TN:()=>c,XL:()=>d});var s=r(60687),i=r(43210),a=r(24224),o=r(4780);let n=(0,a.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=i.forwardRef(({className:e,variant:t,...r},i)=>(0,s.jsx)("div",{ref:i,role:"alert",className:(0,o.cn)(n({variant:t}),e),...r}));l.displayName="Alert";let d=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h5",{ref:r,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));d.displayName="AlertTitle";let c=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"},94735:e=>{"use strict";e.exports=require("events")},95427:(e,t,r)=>{"use strict";r.d(t,{ai:()=>a});var s=r(37612),i=r(9203);let a=(0,s.genkit)({plugins:[(0,i.YF)()],model:"googleai/gemini-1.5-flash-latest"})},98644:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"404587e18641e5b594fdc5e6fe007186c2ea04ba7d":()=>d});var s=r(91199);r(42087);var i=r(95427),a=r(37612),o=r(33331);let n=a.z.object({diagnosisSummary:a.z.string().describe("The summary of the initial plant diagnosis. This may be empty if the user is asking a general question."),followUpQuery:a.z.string().describe("The follow-up question about the diagnosis."),language:a.z.string().optional().describe('The language for the answer (e.g., "en", "es").')}),l=a.z.object({answer:a.z.string().describe("The answer to the follow-up question.")});async function d(e){return u(e)}let c=i.ai.definePrompt({name:"followUpPlantQueriesPrompt",input:{schema:n},output:{schema:l},prompt:`You are a helpful and knowledgeable AI assistant specializing in agriculture and botany. Your response MUST be entirely in the following language: {{language}}. If no language is specified, default to English (en).

  A user is asking a follow-up question.
  
  {{#if diagnosisSummary}}
  The context for the user's question is based on this previous diagnosis summary:
  "{{diagnosisSummary}}"
  {{else}}
  The user is asking a general question not related to a specific, recent diagnosis.
  {{/if}}

  The user's question is:
  "{{followUpQuery}}"

  Provide a concise, accurate, and easy-to-understand answer. If the question is related to a diagnosis, use that context. If it's a general question, answer it based on your broad horticultural knowledge. Remember to respond only in the specified language: {{language}}.`}),u=i.ai.defineFlow({name:"followUpPlantQueriesFlow",inputSchema:n,outputSchema:l},async e=>{let{output:t}=await c(e);return t});(0,o.D)([d]),(0,s.A)(d,"404587e18641e5b594fdc5e6fe007186c2ea04ba7d",null)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[828,361,658,447,891,687,423,259],()=>r(62475));module.exports=s})();