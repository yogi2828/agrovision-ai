"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{285:(e,s,r)=>{r.d(s,{$:()=>c,r:()=>o});var t=r(5155),a=r(2115),n=r(4253),i=r(2085),l=r(9434);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,t.jsx)(m,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:s,...d})});c.displayName="Button"},2201:(e,s,r)=>{r.d(s,{j2:()=>o,yA:()=>l,zS:()=>c});var t=r(3915),a=r(3004),n=r(6864);let i={apiKey:"AIzaSyDkx5HqjimTwBfz6SY8CJ2YzeNIzkZHnT4",authDomain:"agrovision-ai-ek3tf.firebaseapp.com",projectId:"agrovision-ai-ek3tf",storageBucket:"agrovision-ai-ek3tf.firebasestorage.app",messagingSenderId:"481265808356",appId:"1:481265808356:web:276ce7b48aedc0a6f84df1",measurementId:r(9509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},l=(0,t.Dk)().length?(0,t.Sx)():(0,t.Wp)(i),o=(0,a.xI)(l),c=(0,n.TT)().then(e=>e?(0,n.P5)(l):null)},2270:(e,s,r)=>{r.d(s,{f:()=>S});var t=r(5155),a=r(6695),n=r(285),i=r(6126),l=r(2115),o=r(704),c=r(9434);let d=o.bL,m=l.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(o.B8,{ref:s,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});m.displayName=o.B8.displayName;let u=l.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(o.l9,{ref:s,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});u.displayName=o.l9.displayName;let x=l.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(o.UC,{ref:s,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});x.displayName=o.UC.displayName;var g=r(5995),h=r(1949),f=r(8715),p=r(4371),j=r(6936),y=r(8681),v=r(8274),N=r(3838),b=r(2945),w=r(8328),A=r(5219),C=r(7554),E=r(9119),k=r(6766),I=r(6874),R=r.n(I);function S(e){var s;let{result:r,image:l,onReset:o,onSave:c,isHistoryView:I=!1}=e,S=!r.diseaseName||"healthy"===r.diseaseName.toLowerCase(),B=e=>{let{name:s,description:r,productUrl:a}=e;return(0,t.jsxs)("li",{className:"mb-2",children:[(0,t.jsx)("strong",{children:s}),": ",(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:r.replace(/\n/g,"<br />")}}),a&&(0,t.jsx)(n.$,{variant:"link",asChild:!0,className:"p-1 h-auto -ml-1",children:(0,t.jsx)(R(),{href:a,target:"_blank",rel:"noopener noreferrer",children:"(Find Product)"})})]})};return(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,t.jsxs)(a.Zp,{children:[(0,t.jsxs)(a.aR,{className:"text-center pb-4",children:[l&&(0,t.jsx)(k.default,{src:l,alt:"Diagnosed plant",width:200,height:200,className:"rounded-lg mx-auto mb-4 shadow-lg object-cover aspect-square"}),(0,t.jsxs)(i.E,{variant:S?"default":"destructive",className:"mx-auto text-base px-4 py-1",children:[S?(0,t.jsx)(g.A,{className:"mr-2 h-5 w-5"}):(0,t.jsx)(h.A,{className:"mr-2 h-5 w-5"}),S?"Healthy":r.diseaseName]}),(0,t.jsx)(a.ZB,{className:"text-3xl font-headline mt-2",children:S?"Your Plant appears Healthy!":r.diseaseName}),!S&&r.stage&&(0,t.jsxs)(a.BT,{children:["Stage: ",r.stage]})]}),(0,t.jsx)(a.Wu,{children:(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:r.summary})})]}),(0,t.jsxs)(a.Zp,{children:[(0,t.jsx)(a.aR,{children:(0,t.jsxs)(a.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{})," Plant Identification"]})}),(0,t.jsx)(a.Wu,{children:(null==(s=r.plantIdentification)?void 0:s.isPlant)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Common Name:"})," ",r.plantIdentification.commonName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Latin Name:"})," ",(0,t.jsx)("em",{children:r.plantIdentification.latinName})]})]}):(0,t.jsx)("p",{children:"Our AI could not identify a plant in the image. Please try another photo."})})]}),!S&&(0,t.jsxs)(a.Zp,{children:[(0,t.jsx)(a.aR,{children:(0,t.jsx)(a.ZB,{children:"Diagnosis Details"})}),(0,t.jsxs)(a.Wu,{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"text-amber-500"})," Symptoms"]}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",dangerouslySetInnerHTML:{__html:r.symptoms.replace(/\n/g,"<br />")}})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"text-red-500"})," Causes"]}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",dangerouslySetInnerHTML:{__html:r.causes.replace(/\n/g,"<br />")}})]})]})]}),(0,t.jsxs)(a.Zp,{children:[(0,t.jsxs)(a.aR,{children:[(0,t.jsx)(a.ZB,{children:"Care Plan"}),(0,t.jsxs)(a.BT,{children:["Recommendations to ",S?"keep your plant thriving":"help your plant recover","."]})]}),(0,t.jsxs)(a.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 text-center",children:[(0,t.jsxs)(a.Zp,{className:"p-4",children:[(0,t.jsx)(j.A,{className:"mx-auto w-8 h-8 text-amber-500 mb-2"}),(0,t.jsx)("h4",{className:"font-semibold",children:"Sunlight"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:r.careRecommendations.sunlight})]}),(0,t.jsxs)(a.Zp,{className:"p-4",children:[(0,t.jsx)(y.A,{className:"mx-auto w-8 h-8 text-blue-500 mb-2"}),(0,t.jsx)("h4",{className:"font-semibold",children:"Watering"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:r.careRecommendations.watering})]}),(0,t.jsxs)(a.Zp,{className:"p-4",children:[(0,t.jsx)(v.A,{className:"mx-auto w-8 h-8 text-emerald-500 mb-2"}),(0,t.jsx)("h4",{className:"font-semibold",children:"Fertilizer"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:r.careRecommendations.fertilizer})]})]}),!S&&(r.treatmentSuggestions.organic.length>0||r.treatmentSuggestions.chemical.length>0)&&(0,t.jsxs)(d,{defaultValue:"organic",children:[(0,t.jsxs)(m,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(u,{value:"organic",children:[(0,t.jsx)(N.A,{className:"mr-2"})," Organic"]}),(0,t.jsxs)(u,{value:"chemical",children:[(0,t.jsx)(b.A,{className:"mr-2"})," Chemical"]})]}),(0,t.jsx)(x,{value:"organic",className:"mt-4",children:(0,t.jsx)("ul",{className:"pl-1 space-y-2 text-muted-foreground",children:r.treatmentSuggestions.organic.map((e,s)=>(0,t.jsx)(B,{...e},"org-".concat(s)))})}),(0,t.jsx)(x,{value:"chemical",className:"mt-4",children:(0,t.jsx)("ul",{className:"pl-1 space-y-2 text-muted-foreground",children:r.treatmentSuggestions.chemical.map((e,s)=>(0,t.jsx)(B,{...e},"chem-".concat(s)))})})]})]})]}),!S&&(0,t.jsxs)(a.Zp,{children:[(0,t.jsx)(a.aR,{children:(0,t.jsx)(a.ZB,{children:"Prognosis"})}),(0,t.jsxs)(a.Wu,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(w.A,{className:"w-8 h-8 text-primary mt-1 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Estimated Recovery"}),(0,t.jsxs)("p",{className:"text-primary font-bold text-lg",children:[r.recoveryEstimateDays," days"]})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(A.A,{className:"w-8 h-8 text-primary mt-1 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Budget Estimate"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:r.budgetEstimate})]})]})]})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-4 p-4 rounded-lg bg-card border",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,t.jsx)(n.$,{onClick:o,size:"lg",className:"w-full sm:w-auto",variant:"outline",children:I?"Back to History":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.A,{className:"mr-2 h-5 w-5"})," Scan Another"]})}),!I&&(0,t.jsxs)(n.$,{onClick:c,size:"lg",className:"w-full sm:w-auto",children:[(0,t.jsx)(E.A,{className:"mr-2 h-5 w-5"})," Save to History"]})]})})]})}},6126:(e,s,r)=>{r.d(s,{E:()=>l});var t=r(5155);r(2115);var a=r(2085),n=r(9434);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:r}),s),...a})}},6695:(e,s,r)=>{r.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>m});var t=r(5155),a=r(2115),n=r(9434);let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let m=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});m.displayName="CardFooter"},8437:(e,s,r)=>{r.d(s,{A:()=>c,AuthProvider:()=>o});var t=r(5155),a=r(2115),n=r(3004),i=r(2201);let l=(0,a.createContext)({user:null,loading:!0,login:async()=>{},signup:async()=>{},logout:async()=>{},googleSignIn:async()=>{}}),o=e=>{let{children:s}=e,[r,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,n.hg)(i.j2,e=>{o(e),d(!1)});return()=>e()},[]),(0,t.jsx)(l.Provider,{value:{user:r,loading:c,login:(e,s)=>(0,n.x9)(i.j2,e,s),signup:(e,s)=>(0,n.eJ)(i.j2,e,s),logout:()=>(0,n.CI)(i.j2),googleSignIn:()=>{let e=new n.HF;return(0,n.df)(i.j2,e)}},children:s})},c=()=>(0,a.useContext)(l)},8666:(e,s,r)=>{r.d(s,{I0:()=>c,IP:()=>l,K1:()=>d,pi:()=>o,wj:()=>i});var t=r(5317),a=r(2201);let n=(0,t.aU)(a.yA),i=async(e,s)=>{try{if(!e)throw Error("User ID is required to save to history.");return(await (0,t.gS)((0,t.rJ)(n,"users/".concat(e,"/history")),{...s,userId:e,createdAt:t.Dc.now()})).id}catch(e){throw console.error("Error saving diagnosis to history:",e),Error("Could not save diagnosis.")}},l=async e=>{try{let s=(0,t.P)((0,t.rJ)(n,"users/".concat(e,"/history")),(0,t.My)("createdAt","desc")),r=await (0,t.GG)(s),a=[];return r.forEach(e=>{a.push({id:e.id,...e.data()})}),a}catch(s){console.error("Error getting diagnosis history: ",s);try{let s=(0,t.P)((0,t.rJ)(n,"users/".concat(e,"/history"))),r=(await (0,t.GG)(s)).docs.map(e=>({id:e.id,...e.data()}));return console.warn("Returned history without sorting. Please create a Firestore index for 'createdAt' descending."),r.sort((e,s)=>s.createdAt.toMillis()-e.createdAt.toMillis())}catch(e){throw console.error("Error getting diagnosis history on fallback: ",e),Error("Could not retrieve diagnosis history.")}}},o=async(e,s)=>{try{let r=(0,t.H9)(n,"users/".concat(e,"/history"),s),a=await (0,t.x7)(r);if(a.exists()){let e=a.data();return{id:a.id,...e}}return console.log("No such document!"),null}catch(e){throw console.error("Error getting document:",e),Error("Could not retrieve the diagnosis record.")}},c=async(e,s)=>{try{await (0,t.kd)((0,t.H9)(n,"users/".concat(e,"/history"),s))}catch(e){throw console.error("Error deleting diagnosis record:",e),Error("Could not delete diagnosis record.")}},d=async e=>{try{let s=(0,t.P)((0,t.rJ)(n,"users/".concat(e,"/history"))),r=await (0,t.GG)(s),a=(0,t.wP)(n);r.docs.forEach(e=>{a.delete(e.ref)}),await a.commit()}catch(e){throw console.error("Error deleting all user history:",e),Error("Could not delete all user history.")}}},9434:(e,s,r)=>{r.d(s,{cn:()=>n});var t=r(2596),a=r(9688);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,a.QP)((0,t.$)(s))}}}]);