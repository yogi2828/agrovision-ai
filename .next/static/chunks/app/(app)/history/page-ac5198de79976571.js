(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{10:(e,t,r)=>{"use strict";r.d(t,{$v:()=>y,EO:()=>f,Lt:()=>l,Rx:()=>x,Zr:()=>g,ck:()=>p,r7:()=>h,tv:()=>d,wd:()=>m});var n=r(5155),a=r(2115),s=r(1893),i=r(9434),o=r(285);let l=s.bL,d=s.l9,c=s.ZL,u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:t})});u.displayName=s.hJ.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(u,{}),(0,n.jsx)(s.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...a})]})});f.displayName=s.UC.displayName;let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};m.displayName="AlertDialogHeader";let p=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="AlertDialogFooter";let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold",r),...a})});h.displayName=s.hE.displayName;let y=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});y.displayName=s.VY.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.rc,{ref:t,className:(0,i.cn)((0,o.r)(),r),...a})});x.displayName=s.rc.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.ZD,{ref:t,className:(0,i.cn)((0,o.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...a})});g.displayName=s.ZD.displayName},172:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>l});var n=r(5155),a=r(2115),s=r(4253),i=r(2085),o=r(9434);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:d=!1,...c}=e,u=d?s.DX:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...c})});d.displayName="Button"},2201:(e,t,r)=>{"use strict";r.d(t,{j2:()=>l,yA:()=>o,zS:()=>d});var n=r(3915),a=r(3004),s=r(6864);let i={apiKey:"AIzaSyDkx5HqjimTwBfz6SY8CJ2YzeNIzkZHnT4",authDomain:"agrovision-ai-ek3tf.firebaseapp.com",projectId:"agrovision-ai-ek3tf",storageBucket:"agrovision-ai-ek3tf.firebasestorage.app",messagingSenderId:"481265808356",appId:"1:481265808356:web:276ce7b48aedc0a6f84df1",measurementId:r(9509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},o=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)(i),l=(0,a.xI)(o),d=(0,s.TT)().then(e=>e?(0,s.P5)(o):null)},2712:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n=r(2115),a=globalThis?.document?n.useLayoutEffect:()=>{}},3540:(e,t,r)=>{"use strict";r.d(t,{sG:()=>u,hO:()=>f});var n=r(2115),a=r(7650),s=r(6101),i=r(5155),o=n.forwardRef((e,t)=>{let{children:r,...a}=e,s=n.Children.toArray(r),o=s.find(c);if(o){let e=o.props.children,r=s.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,i.jsx)(l,{...a,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,i.jsx)(l,{...a,ref:t,children:r})});o.displayName="Slot";var l=n.forwardRef((e,t)=>{let{children:r,...a}=e;if(n.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),i=function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{s(...e),a(...e)}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==n.Fragment&&(i.ref=t?(0,s.t)(t,e):e),n.cloneElement(r,i)}return n.Children.count(r)>1?n.Children.only(null):null});l.displayName="SlotClone";var d=({children:e})=>(0,i.jsx)(i.Fragment,{children:e});function c(e){return n.isValidElement(e)&&e.type===d}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=n.forwardRef((e,r)=>{let{asChild:n,...a}=e,s=n?o:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(s,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function f(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}},4436:(e,t,r)=>{Promise.resolve().then(r.bind(r,4617))},4617:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var n=r(5155),a=r(2115),s=r(8437),i=r(8666),o=r(6695),l=r(285),d=r(6126),c=r(172);let u=(0,r(157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var f=r(7026),m=r(7481),p=r(6874),h=r.n(p),y=r(5695),x=r(10),g=r(1978);let v={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},N={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function w(){let{user:e,loading:t}=(0,s.A)();(0,y.useRouter)();let[r,p]=(0,a.useState)([]),[w,j]=(0,a.useState)(!0),{toast:b}=(0,m.dj)(),E=(0,a.useCallback)(async()=>{if(e)try{j(!0);let t=await (0,i.IP)(e.uid);p(t)}catch(e){console.error(e),b({variant:"destructive",title:"Error",description:"Failed to load diagnosis history."})}finally{j(!1)}},[e,b]);(0,a.useEffect)(()=>{t||E()},[e,t,E]);let A=async t=>{if(e)try{await (0,i.I0)(e.uid,t),p(e=>e.filter(e=>e.id!==t)),b({title:"Deleted",description:"Diagnosis record has been removed."})}catch(e){console.error(e),b({variant:"destructive",title:"Error",description:"Failed to delete the record."})}};return w||t?(0,n.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,n.jsx)(c.A,{className:"w-8 h-8 animate-spin text-primary"})}):(0,n.jsxs)(g.P.div,{className:"container mx-auto max-w-5xl",variants:v,initial:"hidden",animate:"visible",children:[(0,n.jsxs)("div",{className:"mb-8 text-center md:text-left",children:[(0,n.jsx)("h1",{className:"font-headline text-3xl md:text-4xl font-bold tracking-tight",children:"Diagnosis History"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:"Review your past plant health scans and their outcomes."})]}),r.length>0?(0,n.jsx)(g.P.div,{className:"grid gap-6",variants:v,children:r.map(e=>(0,n.jsx)(g.P.div,{variants:N,children:(0,n.jsxs)(o.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,n.jsx)(o.aR,{children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.ZB,{className:"text-2xl font-headline",children:[e.plantIdentification.commonName," - ",e.diseaseName]}),(0,n.jsx)(o.BT,{className:"text-base",children:e.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,n.jsx)(d.E,{variant:"healthy"===e.diseaseName.toLowerCase()?"default":"destructive",className:"self-start md:self-center",children:e.diseaseName})]})}),(0,n.jsx)(o.Wu,{children:(0,n.jsx)("p",{className:"text-muted-foreground line-clamp-2",children:e.summary})}),(0,n.jsxs)(o.wL,{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,n.jsx)(h(),{href:"/history/".concat(e.id),className:"w-full sm:w-auto",children:(0,n.jsx)(l.$,{variant:"outline",className:"w-full",children:"View Details"})}),(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsxs)(x.Lt,{children:[(0,n.jsx)(x.tv,{asChild:!0,children:(0,n.jsx)(l.$,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive",children:(0,n.jsx)(u,{className:"h-4 w-4"})})}),(0,n.jsxs)(x.EO,{children:[(0,n.jsxs)(x.wd,{children:[(0,n.jsx)(x.r7,{children:"Are you sure?"}),(0,n.jsx)(x.$v,{children:"This action cannot be undone. This will permanently delete this diagnosis record."})]}),(0,n.jsxs)(x.ck,{children:[(0,n.jsx)(x.Zr,{children:"Cancel"}),(0,n.jsx)(x.Rx,{onClick:()=>A(e.id),children:"Delete"})]})]})]})})]})]})},e.id))}):(0,n.jsxs)(g.P.div,{className:"text-center py-16 border-2 border-dashed rounded-lg flex flex-col items-center gap-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[(0,n.jsx)(f.A,{className:"w-12 h-12 text-muted-foreground"}),(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"No History Yet"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:"Start by scanning a plant to see your history here."}),(0,n.jsx)(l.$,{asChild:!0,children:(0,n.jsx)(h(),{href:"/diagnose",children:"Scan a Plant"})})]})]})}},5185:(e,t,r)=>{"use strict";function n(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}r.d(t,{m:()=>n})},5845:(e,t,r)=>{"use strict";r.d(t,{i:()=>s});var n=r(2115),a=r(9033);function s({prop:e,defaultProp:t,onChange:r=()=>{}}){let[s,i]=function({defaultProp:e,onChange:t}){let r=n.useState(e),[s]=r,i=n.useRef(s),o=(0,a.c)(t);return n.useEffect(()=>{i.current!==s&&(o(s),i.current=s)},[s,i,o]),r}({defaultProp:t,onChange:r}),o=void 0!==e,l=o?e:s,d=(0,a.c)(r);return[l,n.useCallback(t=>{if(o){let r="function"==typeof t?t(e):t;r!==e&&d(r)}else i(t)},[o,e,i,d])]}},6081:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,q:()=>s});var n=r(2115),a=r(5155);function s(e,t){let r=n.createContext(t),s=e=>{let{children:t,...s}=e,i=n.useMemo(()=>s,Object.values(s));return(0,a.jsx)(r.Provider,{value:i,children:t})};return s.displayName=e+"Provider",[s,function(a){let s=n.useContext(r);if(s)return s;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function i(e,t=[]){let r=[],s=()=>{let t=r.map(e=>n.createContext(e));return function(r){let a=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return s.scopeName=e,[function(t,s){let i=n.createContext(s),o=r.length;r=[...r,s];let l=t=>{let{scope:r,children:s,...l}=t,d=r?.[e]?.[o]||i,c=n.useMemo(()=>l,Object.values(l));return(0,a.jsx)(d.Provider,{value:c,children:s})};return l.displayName=t+"Provider",[l,function(r,a){let l=a?.[e]?.[o]||i,d=n.useContext(l);if(d)return d;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(s,...t)]}},6101:(e,t,r)=>{"use strict";r.d(t,{s:()=>i,t:()=>s});var n=r(2115);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let r=!1,n=e.map(e=>{let n=a(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():a(e[t],null)}}}}function i(...e){return n.useCallback(s(...e),e)}},6126:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var n=r(5155);r(2115);var a=r(2085),s=r(9434);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(i({variant:r}),t),...a})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>u});var n=r(5155),a=r(2115),s=r(9434);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},7026:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(157).A)("CircleSlash",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]])},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>f});var n=r(2115);let a=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(d);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8437:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>l});var n=r(5155),a=r(2115),s=r(3004),i=r(2201);let o=(0,a.createContext)({user:null,loading:!0,login:async()=>{},signup:async()=>{},logout:async()=>{},googleSignIn:async()=>{}}),l=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,s.hg)(i.j2,e=>{l(e),c(!1)});return()=>e()},[]),(0,n.jsx)(o.Provider,{value:{user:r,loading:d,login:(e,t)=>(0,s.x9)(i.j2,e,t),signup:(e,t)=>(0,s.eJ)(i.j2,e,t),logout:()=>(0,s.CI)(i.j2),googleSignIn:()=>{let e=new s.HF;return(0,s.df)(i.j2,e)}},children:t})},d=()=>(0,a.useContext)(o)},8666:(e,t,r)=>{"use strict";r.d(t,{I0:()=>d,IP:()=>o,K1:()=>c,pi:()=>l,wj:()=>i});var n=r(5317),a=r(2201);let s=(0,n.aU)(a.yA),i=async(e,t)=>{try{if(!e)throw Error("User ID is required to save to history.");return(await (0,n.gS)((0,n.rJ)(s,"users/".concat(e,"/history")),{...t,userId:e,createdAt:n.Dc.now()})).id}catch(e){throw console.error("Error saving diagnosis to history:",e),Error("Could not save diagnosis.")}},o=async e=>{try{let t=(0,n.P)((0,n.rJ)(s,"users/".concat(e,"/history")),(0,n.My)("createdAt","desc")),r=await (0,n.GG)(t),a=[];return r.forEach(e=>{a.push({id:e.id,...e.data()})}),a}catch(t){console.error("Error getting diagnosis history: ",t);try{let t=(0,n.P)((0,n.rJ)(s,"users/".concat(e,"/history"))),r=(await (0,n.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));return console.warn("Returned history without sorting. Please create a Firestore index for 'createdAt' descending."),r.sort((e,t)=>t.createdAt.toMillis()-e.createdAt.toMillis())}catch(e){throw console.error("Error getting diagnosis history on fallback: ",e),Error("Could not retrieve diagnosis history.")}}},l=async(e,t)=>{try{let r=(0,n.H9)(s,"users/".concat(e,"/history"),t),a=await (0,n.x7)(r);if(a.exists()){let e=a.data();return{id:a.id,...e}}return console.log("No such document!"),null}catch(e){throw console.error("Error getting document:",e),Error("Could not retrieve the diagnosis record.")}},d=async(e,t)=>{try{await (0,n.kd)((0,n.H9)(s,"users/".concat(e,"/history"),t))}catch(e){throw console.error("Error deleting diagnosis record:",e),Error("Could not delete diagnosis record.")}},c=async e=>{try{let t=(0,n.P)((0,n.rJ)(s,"users/".concat(e,"/history"))),r=await (0,n.GG)(t),a=(0,n.wP)(s);r.docs.forEach(e=>{a.delete(e.ref)}),await a.commit()}catch(e){throw console.error("Error deleting all user history:",e),Error("Could not delete all user history.")}}},8905:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var n=r(2115),a=r(6101),s=r(2712),i=e=>{let{present:t,children:r}=e,i=function(e){var t,r;let[a,i]=n.useState(),l=n.useRef({}),d=n.useRef(e),c=n.useRef("none"),[u,f]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},n.useReducer((e,t)=>{let n=r[e][t];return null!=n?n:e},t));return n.useEffect(()=>{let e=o(l.current);c.current="mounted"===u?e:"none"},[u]),(0,s.N)(()=>{let t=l.current,r=d.current;if(r!==e){let n=c.current,a=o(t);e?f("MOUNT"):"none"===a||(null==t?void 0:t.display)==="none"?f("UNMOUNT"):r&&n!==a?f("ANIMATION_OUT"):f("UNMOUNT"),d.current=e}},[e,f]),(0,s.N)(()=>{if(a){var e;let t,r=null!=(e=a.ownerDocument.defaultView)?e:window,n=e=>{let n=o(l.current).includes(e.animationName);if(e.target===a&&n&&(f("ANIMATION_END"),!d.current)){let e=a.style.animationFillMode;a.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=e)})}},s=e=>{e.target===a&&(c.current=o(l.current))};return a.addEventListener("animationstart",s),a.addEventListener("animationcancel",n),a.addEventListener("animationend",n),()=>{r.clearTimeout(t),a.removeEventListener("animationstart",s),a.removeEventListener("animationcancel",n),a.removeEventListener("animationend",n)}}f("ANIMATION_END")},[a,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:n.useCallback(e=>{e&&(l.current=getComputedStyle(e)),i(e)},[])}}(t),l="function"==typeof r?r({present:i.isPresent}):n.Children.only(r),d=(0,a.s)(i.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,a=n&&"isReactWarning"in n&&n.isReactWarning;return a?e.ref:(a=(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get)&&"isReactWarning"in n&&n.isReactWarning)?e.props.ref:e.props.ref||e.ref}(l));return"function"==typeof r||i.isPresent?n.cloneElement(l,{ref:d}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}i.displayName="Presence"},9033:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(2115);function a(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(2596),a=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[644,992,277,648,427,874,366,921,893,441,684,358],()=>t(4436)),_N_E=e.O()}]);