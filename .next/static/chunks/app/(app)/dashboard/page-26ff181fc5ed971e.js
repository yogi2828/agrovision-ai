(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>l});var r=s(5155),a=s(2115),n=s(4253),i=s(2085),o=s(9434);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...c}=e,h=d?n.DX:"button";return(0,r.jsx)(h,{className:(0,o.cn)(l({variant:a,size:i,className:s})),ref:t,...c})});d.displayName="Button"},420:(e,t,s)=>{Promise.resolve().then(s.bind(s,8227))},2201:(e,t,s)=>{"use strict";s.d(t,{j2:()=>l,yA:()=>o,zS:()=>d});var r=s(3915),a=s(3004),n=s(6864);let i={apiKey:"AIzaSyDkx5HqjimTwBfz6SY8CJ2YzeNIzkZHnT4",authDomain:"agrovision-ai-ek3tf.firebaseapp.com",projectId:"agrovision-ai-ek3tf",storageBucket:"agrovision-ai-ek3tf.firebasestorage.app",messagingSenderId:"481265808356",appId:"1:481265808356:web:276ce7b48aedc0a6f84df1",measurementId:s(9509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},o=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)(i),l=(0,a.xI)(o),d=(0,n.TT)().then(e=>e?(0,n.P5)(o):null)},3503:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(157).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},3638:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},6126:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var r=s(5155);s(2115);var a=s(2085),n=s(9434);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},6280:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(157).A)("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]])},6695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>h});var r=s(5155),a=s(2115),n=s(9434);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});h.displayName="CardFooter"},7026:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(157).A)("CircleSlash",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]])},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var r=s(2115);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function h(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8227:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});var r=s(5155),a=s(285),n=s(6695),i=s(6766),o=s(6874),l=s.n(o),d=s(157);let c=(0,d.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var h=s(7026),u=s(2115),x=s(8437),m=s(8666),f=s(8856),p=s(7481),g=s(6126);function y(){let{user:e}=(0,x.A)(),[t,s]=(0,u.useState)([]),[o,d]=(0,u.useState)(!0),{toast:y}=(0,p.dj)();(0,u.useEffect)(()=>{e?(0,m.IP)(e.uid).then(e=>{s(e.slice(0,3))}).catch(e=>{console.error(e),y({variant:"destructive",title:"Error",description:"Could not load recent diagnoses."})}).finally(()=>d(!1)):d(!1)},[e,y]);let v=()=>(0,r.jsxs)("div",{className:"flex items-center gap-4 p-2",children:[(0,r.jsx)(f.E,{className:"h-16 w-16 rounded-md"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)(f.E,{className:"h-4 w-3/4"}),(0,r.jsx)(f.E,{className:"h-4 w-1/2"})]}),(0,r.jsx)(f.E,{className:"h-9 w-20 rounded-md"})]});return(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.ZB,{children:"Recent Diagnoses"}),(0,r.jsx)(n.BT,{children:"Your latest plant health scans."})]}),(0,r.jsx)(a.$,{variant:"ghost",asChild:!0,children:(0,r.jsxs)(l(),{href:"/history",children:["View all ",(0,r.jsx)(c,{className:"ml-2 w-4 h-4"})]})})]})}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{}),(0,r.jsx)(v,{}),(0,r.jsx)(v,{})]}):t.length>0?t.map(e=>{let t="https://placehold.co/64x64.png?text=".concat(encodeURIComponent(e.plantIdentification.commonName.split(" ").join("\\n")));return(0,r.jsxs)(l(),{href:"/history/".concat(e.id),className:"flex items-center gap-4 p-2 rounded-lg hover:bg-accent/50 cursor-pointer",children:[(0,r.jsx)(i.default,{src:t,alt:e.plantIdentification.commonName,width:64,height:64,className:"rounded-md object-cover"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:e.plantIdentification.commonName}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.createdAt.toDate().toLocaleDateString()})]}),(0,r.jsx)(g.E,{variant:"healthy"===e.diseaseName.toLowerCase()?"default":"destructive",children:e.diseaseName})]},e.id)}):(0,r.jsxs)("div",{className:"text-center py-8 flex flex-col items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-8 h-8 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"No diagnoses found yet."}),(0,r.jsx)(a.$,{variant:"secondary",asChild:!0,children:(0,r.jsx)(l(),{href:"/diagnose",children:"Scan your first plant"})})]})})})]})}var v=s(6936);let j=(0,d.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);function w(){let[e,t]=(0,u.useState)(""),[s,a]=(0,u.useState)("Loading...");return(0,u.useEffect)(()=>{t(new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{a("Green Valley")},e=>{console.error("Geolocation error:",e),a("Location N/A")}):a("Geolocation not supported")},[]),(0,r.jsx)(n.Zp,{className:"w-full md:w-auto",children:(0,r.jsxs)(n.Wu,{className:"p-4 flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-8 h-8 text-amber-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:"28\xb0C"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sunny"})]})]}),(0,r.jsxs)("div",{className:"border-l pl-4",children:[(0,r.jsxs)("p",{className:"flex items-center gap-1 font-semibold",children:[(0,r.jsx)(j,{className:"w-4 h-4"})," ",s]}),e?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e}):(0,r.jsx)(f.E,{className:"h-4 w-24 mt-1"})]})]})})}var N=s(6280),b=s(3638),A=s(3838);let k=(0,d.A)("BookCheck",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9 9.5 2 2 4-4",key:"1dth82"}]]);var E=s(3503),S=s(1978);let T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},C={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};function I(){return(0,r.jsxs)(S.P.div,{className:"space-y-12",variants:T,initial:"hidden",animate:"visible",children:[(0,r.jsxs)(S.P.section,{className:"text-center bg-card p-8 rounded-lg shadow-md",variants:C,children:[(0,r.jsx)("h1",{className:"font-headline text-3xl md:text-5xl font-bold tracking-tight",children:"Diagnose. Treat. Grow Better."}),(0,r.jsx)("p",{className:"text-muted-foreground mt-4 max-w-2xl mx-auto",children:"Welcome to AgroVision AI, your personal plant health assistant. Get instant diagnoses and expert treatment plans to keep your plants thriving."}),(0,r.jsxs)(S.P.div,{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[(0,r.jsx)(S.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(a.$,{asChild:!0,size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground shadow-md hover:shadow-lg transition-shadow w-full sm:w-auto",children:(0,r.jsxs)(l(),{href:"/diagnose",children:[(0,r.jsx)(N.A,{className:"mr-2 h-6 w-6"}),"Scan New Plant"]})})}),(0,r.jsx)(S.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(a.$,{asChild:!0,size:"lg",variant:"secondary",className:"w-full sm:w-auto",children:(0,r.jsxs)(l(),{href:"/history",children:[(0,r.jsx)(b.A,{className:"mr-2 h-6 w-6"}),"View History"]})})})]})]}),(0,r.jsx)(S.P.div,{variants:C,children:(0,r.jsx)(w,{})}),(0,r.jsxs)(S.P.section,{variants:C,children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center mb-6 font-headline",children:"Features"}),(0,r.jsxs)(S.P.div,{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",variants:T,children:[(0,r.jsx)(S.P.div,{variants:C,whileHover:{y:-5,transition:{type:"spring",stiffness:300}},children:(0,r.jsxs)(n.Zp,{className:"text-center h-full hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(A.A,{className:"w-12 h-12 mx-auto text-primary"}),(0,r.jsx)(n.ZB,{children:"Plant Disease Detection"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Snap a photo to instantly identify plant diseases."})})]})}),(0,r.jsx)(S.P.div,{variants:C,whileHover:{y:-5,transition:{type:"spring",stiffness:300}},children:(0,r.jsxs)(n.Zp,{className:"text-center h-full hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(k,{className:"w-12 h-12 mx-auto text-primary"}),(0,r.jsx)(n.ZB,{children:"Organic & Chemical Treatments"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Get tailored treatment plans for your specific plant."})})]})}),(0,r.jsx)(S.P.div,{variants:C,whileHover:{y:-5,transition:{type:"spring",stiffness:300}},children:(0,r.jsxs)(n.Zp,{className:"text-center h-full hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(E.A,{className:"w-12 h-12 mx-auto text-primary"}),(0,r.jsx)(n.ZB,{children:"AI Chatbot"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Ask our AI assistant any agricultural question."})})]})}),(0,r.jsx)(S.P.div,{variants:C,whileHover:{y:-5,transition:{type:"spring",stiffness:300}},children:(0,r.jsxs)(n.Zp,{className:"text-center h-full hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(b.A,{className:"w-12 h-12 mx-auto text-primary"}),(0,r.jsx)(n.ZB,{children:"History Tracker"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Keep a record of all your past diagnoses."})})]})})]})]}),(0,r.jsx)(S.P.div,{variants:C,children:(0,r.jsx)(y,{})})]})}},8437:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>l});var r=s(5155),a=s(2115),n=s(3004),i=s(2201);let o=(0,a.createContext)({user:null,loading:!0,login:async()=>{},signup:async()=>{},logout:async()=>{},googleSignIn:async()=>{}}),l=e=>{let{children:t}=e,[s,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,n.hg)(i.j2,e=>{l(e),c(!1)});return()=>e()},[]),(0,r.jsx)(o.Provider,{value:{user:s,loading:d,login:(e,t)=>(0,n.x9)(i.j2,e,t),signup:(e,t)=>(0,n.eJ)(i.j2,e,t),logout:()=>(0,n.CI)(i.j2),googleSignIn:()=>{let e=new n.HF;return(0,n.df)(i.j2,e)}},children:t})},d=()=>(0,a.useContext)(o)},8666:(e,t,s)=>{"use strict";s.d(t,{I0:()=>d,IP:()=>o,K1:()=>c,pi:()=>l,wj:()=>i});var r=s(5317),a=s(2201);let n=(0,r.aU)(a.yA),i=async(e,t)=>{try{if(!e)throw Error("User ID is required to save to history.");return(await (0,r.gS)((0,r.rJ)(n,"users/".concat(e,"/history")),{...t,userId:e,createdAt:r.Dc.now()})).id}catch(e){throw console.error("Error saving diagnosis to history:",e),Error("Could not save diagnosis.")}},o=async e=>{try{let t=(0,r.P)((0,r.rJ)(n,"users/".concat(e,"/history")),(0,r.My)("createdAt","desc")),s=await (0,r.GG)(t),a=[];return s.forEach(e=>{a.push({id:e.id,...e.data()})}),a}catch(t){console.error("Error getting diagnosis history: ",t);try{let t=(0,r.P)((0,r.rJ)(n,"users/".concat(e,"/history"))),s=(await (0,r.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));return console.warn("Returned history without sorting. Please create a Firestore index for 'createdAt' descending."),s.sort((e,t)=>t.createdAt.toMillis()-e.createdAt.toMillis())}catch(e){throw console.error("Error getting diagnosis history on fallback: ",e),Error("Could not retrieve diagnosis history.")}}},l=async(e,t)=>{try{let s=(0,r.H9)(n,"users/".concat(e,"/history"),t),a=await (0,r.x7)(s);if(a.exists()){let e=a.data();return{id:a.id,...e}}return console.log("No such document!"),null}catch(e){throw console.error("Error getting document:",e),Error("Could not retrieve the diagnosis record.")}},d=async(e,t)=>{try{await (0,r.kd)((0,r.H9)(n,"users/".concat(e,"/history"),t))}catch(e){throw console.error("Error deleting diagnosis record:",e),Error("Could not delete diagnosis record.")}},c=async e=>{try{let t=(0,r.P)((0,r.rJ)(n,"users/".concat(e,"/history"))),s=await (0,r.GG)(t),a=(0,r.wP)(n);s.docs.forEach(e=>{a.delete(e.ref)}),await a.commit()}catch(e){throw console.error("Error deleting all user history:",e),Error("Could not delete all user history.")}}},8856:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var r=s(5155),a=s(9434);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...s})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2596),a=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[644,992,277,648,427,874,366,934,441,684,358],()=>t(420)),_N_E=e.O()}]);